!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).AnimJS={})}(this,(function(t){"use strict";class e{constructor(t){this.callback=t,this.isDisposed=!1,this.id=requestAnimationFrame(this.handle=this.handle.bind(this))}handle(t){var e;if(this.isDisposed)return;const s=t-(null!==(e=this.previousElapsed)&&void 0!==e?e:t);this.previousElapsed=t,this.callback(s),this.id=requestAnimationFrame(this.handle)}dispose(){this.isDisposed=!0,cancelAnimationFrame(this.id)}}var s;t.AnimationStatus=void 0,(s=t.AnimationStatus||(t.AnimationStatus={})).NONE="none",s.FORWARD="forward",s.FORWARDED="forwarded",s.BACKWARD="backward",s.BACKWARDED="backwarded";class i{}class n extends i{constructor(){super(...arguments),this.listeners=[],this.statusListeners=[]}addListener(t){console.assert(!this.listeners.includes(t),"Already a given listener does exist."),this.listeners.push(t)}removeListener(t){console.assert(this.listeners.includes(t),"Already a given listener does not exist."),this.listeners=this.listeners.filter((e=>e!=t))}addStatusListener(t){console.assert(!this.statusListeners.includes(t),"Already a given status listener does exist."),this.statusListeners.push(t)}removeStatusListener(t){console.assert(this.statusListeners.includes(t),"Already a given status listener does not exist."),this.statusListeners=this.statusListeners.filter((e=>e!=t))}notifyListeners(t){this.listeners.forEach((e=>e(t)))}notifyStatusListeners(t){this.statusListeners.forEach((e=>e(t)))}}class a extends n{get status(){return this._status}set status(t){this._status!=t&&this.notifyStatusListeners(this._status=t)}get value(){return this._value}set value(t){this._value!=t&&this.notifyListeners(this._value=t)}constructor(e,s=0,i=1,n=s){if(super(),this.duration=e,this.lowerValue=s,this.upperValue=i,this._status=t.AnimationStatus.NONE,this.lowerValue>this.upperValue)throw new Error("The lowerValue must be less than the upperValue.");this._value=n}get range(){return this.upperValue-this.lowerValue}get relValue(){return(this.value-this.lowerValue)/this.range}get progressValue(){const t=this.tween.begin,e=this.tween.end-t;return(this.relValue-t)/e}forward(t){this.animateTo(this.upperValue,t)}backward(t){this.animateTo(this.lowerValue,t)}repeat(){this.addStatusListener((e=>{e==t.AnimationStatus.FORWARDED&&this.backward(),e==t.AnimationStatus.BACKWARDED&&this.forward()})),this.status!=t.AnimationStatus.NONE&&this.status!=t.AnimationStatus.BACKWARDED||this.forward()}animateTo(t,e){this.animate(this.value,t,e)}animate(s,i,n=this.duration){var a;if(i==s)return;console.assert(s>=this.lowerValue,"A given [from] is less than the min-range."),console.assert(i<=this.upperValue,"A given [to] is larger than the max-range."),this.value=s,this.tween={begin:s,end:i};const r=i>s;this.status=r?t.AnimationStatus.FORWARD:t.AnimationStatus.BACKWARD;const o=n/this.range;null===(a=this.activeTicker)||void 0===a||a.dispose(),this.activeTicker=new e((e=>{const n=e/o,a=r?n:-n,u=this.consume(s,i,a);if(Math.abs(a-u)>1e-10)return this.value=i,this.dispose(),void(this.status=r?t.AnimationStatus.FORWARDED:t.AnimationStatus.BACKWARDED);this.value+=u}))}consume(t,e,s){const i=e-(this.value+s);return e>t?i<=0?i:s:i>=0?i:s}dispose(){var t;null===(t=this.activeTicker)||void 0===t||t.dispose(),this.activeTicker=null}reset(){this.status=t.AnimationStatus.NONE,this.value=this.lowerValue,this.tween=null}}class r{constructor(t,e,s,i=1){if(this.red=t,this.green=e,this.blue=s,this.alpha=i,this.red>255||this.red<0||this.green>255||this.green<0||this.blue>255||this.blue<0||this.alpha>1||this.alpha<0)throw new Error("The color values given is extent overflowed. ex: new Color(0~255, 0~255, 0~255, 0~1)")}toHex(){const t=t=>{const e=Math.round(t).toString(16);return 1==e.length?"0"+e:e};return`#${t(this.red)}${t(this.green)}${t(this.blue)}${t(255*this.alpha)}`}static var(t,e){const s=window.getComputedStyle(e||document.documentElement).getPropertyValue(t).trim();if(""===s)throw new Error("The hex color format of the given name could not be found.");return this.parse(s)}static parse(t){const e=t.startsWith("#")?t.slice(1,t.length):t;let s=0,i=0,n=0,a=8==e.length?parseInt(e.slice(6,8),16)/255:1;if(6!=e.length&&8!=e.length)throw new Error("The given string is unvalid. (ex: #202020 or #202020FF)");return s=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16),new r(s,i,n,a)}toString(){return this.toHex()}}class o{}class u extends o{constructor(t,e){super(),this.begin=t,this.end=e}transform(t){return this.begin+(this.end-this.begin)*t}}class h extends n{constructor(e,s,i){super(),this.curve=s,this.status=t.AnimationStatus.NONE,this.value=null!=i?i:0,console.assert(null!=e,"An animation duration cannot be null."),console.assert(0!=e,"An animation duration cannot be 0."),this.parent=new a(e,0,1),this.parent.addListener((t=>{const e=this.parent.progressValue;if(null==s)return void this.notifyListeners(this.value=this.tween.transform(e));const i=s.transform(e),n=this.tween.end-this.tween.begin,a=this.tween.begin+n*i;this.notifyListeners(this.value=a)})),this.parent.addStatusListener((e=>{if(e==t.AnimationStatus.NONE)return;const s=this.tween.end>this.tween.begin;e==t.AnimationStatus.FORWARD?this.notifyStatusListeners(this.status=s?t.AnimationStatus.FORWARD:t.AnimationStatus.BACKWARD):this.notifyStatusListeners(this.status=s?t.AnimationStatus.FORWARDED:t.AnimationStatus.BACKWARDED)}))}animateTo(t){t!=this.value&&this.animate(this.value,t)}animate(t,e){this.tween=new u(t,e),this.parent.reset(),this.parent.forward()}dispose(){this.tween=null,this.parent.dispose(),this.parent=null}}class l{constructor(t,e){this.x=t,this.y=e}lerp(t,e){const s=this.x+(t.x-this.x)*e,i=this.y+(t.y-this.y)*e;return new l(s,i)}}class c{constructor(t,e,s,i,n=new l(0,0),a=new l(1,1),r=1e-4){this.errorBound=r,this.p1=n,this.p2=new l(t,e),this.p3=new l(s,i),this.p4=a}get flipped(){return new c(1-this.p2.x,1-this.p2.y,1-this.p3.x,1-this.p3.y,this.p1,this.p4,this.errorBound)}at(t){const e=this.p1,s=this.p2,i=this.p3,n=this.p4,a=e.lerp(s,t),r=s.lerp(i,t),o=i.lerp(n,t),u=a.lerp(r,t),h=r.lerp(o,t);return u.lerp(h,t)}transform(t){if(t<0||t>1)throw new Error("In the transform function of the Cubic, t must be given from 0 to 1.");if(0==t)return this.p1.y;if(1==t)return this.p4.y;let e=0,s=1;for(;;){const i=(e+s)/2,n=this.at(i);if(Math.abs(t-n.x)<this.errorBound)return n.y;n.x<t?e=i:s=i}}createAnimation(t){return new h(t,this)}static var(t,e){const s=window.getComputedStyle(e||document.documentElement).getPropertyValue(t).trim();if(""===s)throw new Error("The cubic format value of the given name could not be found.");return this.parse(s)}static parse(t){const e=t.match(/([0-9.]+)/g).map(Number);if(4!=e.length)throw new Error("The given [str] format is invalid. (ex: cubic-bezier(0,1,0,1))");return new c(e[0],e[1],e[2],e[3])}toString(){return`Cubic(${this.p2.x}, ${this.p2.y}, ${this.p3.x}, ${this.p3.y})`}}const d={Linear:new c(0,0,1,1),Ease:new c(.25,.1,.25,1),EaseIn:new c(.42,0,1,1),EaseOut:new c(0,0,.58,1),EaseInOut:new c(.42,0,.58,1),EaseInSine:new c(.12,0,.39,0),EaseOutSine:new c(.61,1,.88,1),EaseInQuad:new c(.11,0,.5,0),EaseOutQuad:new c(.5,1,.89,1),EaseInOutQuad:new c(.45,0,.55,1),EaseInOutSine:new c(.37,0,.63,1),EaseInCubic:new c(.32,0,.67,0),EaseOutCubic:new c(.33,1,.68,1),EaseInOutCubic:new c(.65,0,.35,1),EaseInQuart:new c(.5,0,.75,0),EaseOutQuart:new c(.25,1,.5,1),EaseInOutQuart:new c(.76,0,.24,1),EaseInQuint:new c(.64,0,.78,0),EaseOutQuint:new c(.22,1,.36,1),EaseInOutQuint:new c(.83,0,.17,1),EaseInExpo:new c(.7,0,.84,0),EaseOutExpo:new c(.16,1,.3,1),EaseInOutExpo:new c(.87,0,.13,1),EaseInCirc:new c(.55,0,1,.45),EaseOutCirc:new c(0,.55,.45,1),EaseInOutCirc:new c(.85,0,.15,1),EaseInBack:new c(.36,0,.66,-.56),EaseOutBack:new c(.34,1.56,.64,1),EaseInOutBack:new c(.68,-.6,.32,1.6)};t.Animatable=i,t.Animation=h,t.AnimationController=a,t.AnimationListenable=n,t.Color=r,t.ColorTween=class extends o{constructor(t,e){super(),this.begin=t,this.end=e}transform(t){const e=this.begin,s=this.end,i=(t,e,s)=>t+(e-t)*s;return new r(i(e.red,s.red,t),i(e.green,s.green,t),i(e.blue,s.blue,t),i(e.alpha,s.alpha,t))}},t.Cubic=c,t.CubicPoint=l,t.Curve=d,t.NumberTween=u,t.Ticker=e,t.Tween=o}));
//# sourceMappingURL=index.umd.js.map
